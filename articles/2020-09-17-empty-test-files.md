---
title: 何も書かれていないテストファイルを消す
---

雑なスクリプトを書いて空のテストファイルを消したという話。

```
require 'pathname'

Pathname.glob('spec/**/*_spec.rb').each do |pathname|
  if pathname.each_line.count < 10 && !pathname.read.match?(/\bit\b/)
    puts pathname
  end
end
```

特にRailsのようなomakaseを志向したフレームワークなんかは、ファイルジェネレーターの支援が手厚く、モデルなんかをつくろうとしたときに自動的に実装とテストファイルの雛形を自動生成してくれたりする。そういうものを気にせず放置していると、何も定義されていない空のファイルが大量に溜まっていったりするので、気を付けていないとたまにこういう活動が必要になる。

汎用的なアンチパターンのあるある話だと思ったので、記事に書いておくことにした。またこういう話が出てきたら、適当な粒度で記事にまとめて雑に書いていきたい。こういうツッコミどころの多い文章は、匿名の人々による批判に合いやすく、なかなか書きにくいのだけど、助言の流布ではなく個人の記録という体裁を保つことで、気にせず書いていけたらと良いと思う。
